<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Simple Snake Presentation</title>
        <link rel="stylesheet" href="./style.css" />
    </head>
    <body>
        <main>
            <section class="slide">
                <!-- {{{ -->
                <h1>Hello CodeCool!</h1>

                <ul>
                    <li>
                        My name is <strong>Noah Rosenzweig</strong>
                        <br />
                        <a href="https://github.com/Noah2610" target="_blank"
                            >github.com/Noah2610</a
                        >
                        <br />
                        <a
                            href="https://twitter.com/NoahRosenzweig"
                            target="_blank"
                            >@NoahRosenzweig</a
                        >
                    </li>

                    <li>
                        Doing <strong>Web Development</strong> for about
                        <strong>6 years</strong>
                    </li>

                    <li>
                        Passion for
                        <ul>
                            <li>Web &amp; Game Development</li>
                            <li>Type Safety</li>
                            <li>Clean Code</li>
                            <li>Linux &amp; Shell scripting</li>
                            <li>Talking about code</li>
                        </ul>
                    </li>
                </ul>
                <!-- }}} -->
            </section>

            <section class="slide">
                <!-- {{{ -->
                <h1>Simple Snake Game</h1>

                <div class="container-horz">
                    <div>
                        <iframe
                            id="game-frame"
                            src="https://simple-snake-noahro.vercel.app"
                            frameborder="0"
                        ></iframe>
                    </div>

                    <div>
                        <ul>
                            <li>Basic <strong>HTML</strong></li>
                            <li>
                                Some <strong>CSS</strong>
                                <ul class="small">
                                    <li>
                                        <a
                                            href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties"
                                            target="_blank"
                                            >CSS Variables</a
                                        >
                                    </li>
                                </ul>
                            </li>
                            <li>
                                Plain <strong>JavaScript</strong>
                                <ul class="small">
                                    <li>
                                        <a
                                            href="https://developer.mozilla.org/en-US/docs/Web/API/Window/requestAnimationFrame"
                                            target="_blank"
                                        >
                                            <code class="code"
                                                >window.requestAnimationFrame()</code
                                            >
                                        </a>
                                    </li>
                                    <li>
                                        <a
                                            href="https://developer.mozilla.org/en-US/docs/Web/API/Element/classList"
                                            target="_blank"
                                        >
                                            <code class="code">classList</code>
                                            API
                                        </a>
                                    </li>
                                    <li>
                                        <a
                                            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator"
                                            target="_blank"
                                        >
                                            Nullish Coalescing Operator
                                            <code class="code">??</code>
                                        </a>
                                    </li>
                                    <li>
                                        <a
                                            href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage"
                                            target="_blank"
                                        >
                                            <code class="code"
                                                >window.localStorage</code
                                            >
                                            API
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- }}} -->
            </section>

            <section class="slide">
                <!-- {{{ -->
                <h1>Package Setup</h1>

                <pre class="code color-white text-slim">
$ mkdir simple-snake
$ cd simple-snake
$ npm init -y
$ npm install --save-dev live-server
$ npm run dev</pre
                >

                <div class="code-file">
                    <code class="code title">package.json</code>
                    <pre class="code body color-yellow">
{
    "scripts": {
        "dev": "live-server ."
    },
    "devDependencies": {
        "live-server": "^1.2.2"
    }
}
</pre
                    >
                </div>
                <!-- }}} -->
            </section>

            <section class="slide">
                <!-- {{{ -->
                <h1>HTML Setup</h1>

                <pre class="code color-white text-slim">
$ touch index.html style.css index.js
$ code .</pre
                >

                <div class="code-file">
                    <code class="code title">index.html</code>
                    <pre class="code body color-red">
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Simple Snake&lt;/title&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;./style.css&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;main id=&quot;game&quot;&gt;
        &lt;/main&gt;

        &lt;script type=&quot;text/javascript&quot; src=&quot;./index.js&quot;&gt;
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre
                    >
                </div>
                <!-- }}} -->
            </section>

            <section class="slide">
                <!-- {{{ -->
                <h1>CSS Setup</h1>

                <div class="code-file">
                    <code class="code title">style.css</code>
                    <pre class="code body color-green">
body {
    /* Take up full visible space */
    position: absolute;
    width: 100%;
    height: 100%;
    margin: 0;

    /* Center child elements */
    display: flex;
    justify-content: center;
    align-items: center;

    background-color: #666666;
}

#game {
    position: relative;
    width: 640px;
    height: 640px;
    background-color: #000000;
}</pre
                    >
                </div>
                <!-- }}} -->
            </section>

            <section class="slide">
                <!-- {{{ -->
                <h1>Setup HTML Game Elements</h1>

                <div class="code-file">
                    <code class="code title">index.html</code>
                    <pre class="code body color-red">
&lt;main id=&quot;game&quot;&gt;
    &lt;div id=&quot;snake-head&quot;&gt;&lt;/div&gt;

    &lt;div class=&quot;snake-body&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;snake-body&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;snake-body&quot;&gt;&lt;/div&gt;

    &lt;div id=&quot;food&quot;&gt;&lt;/div&gt;
&lt;/main&gt;</pre
                    >
                </div>
                <!-- }}} -->
            </section>

            <section class="slide">
                <!-- {{{ -->
                <h1>Styling Game Elements with CSS</h1>

                <div class="container-vert">
                    <div class="code-file">
                        <code class="code title">index.html</code>
                        <pre class="code body color-red body--small">
&lt;div id=&quot;snake-head&quot; class=&quot;entity&quot;&gt;&lt;/div&gt;

&lt;div class=&quot;snake-body entity&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;snake-body entity&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;snake-body entity&quot;&gt;&lt;/div&gt;

&lt;div id=&quot;food&quot; class=&quot;entity&quot;&gt;&lt;/div&gt;</pre
                        >
                    </div>

                    <div class="code-file">
                        <code class="code title">style.css</code>
                        <pre class="code body color-green body--small">
.entity {
    position: absolute;
    width: 32px;
    height: 32px;
}

#snake-head {
    background-color: #ffffff;
}

.snake-body {
    background-color: #cccccc;
}

#food {
    background-color: #ff0000;
}</pre
                        >
                    </div>
                </div>
                <!-- }}} -->
            </section>

            <section class="slide">
                <!-- {{{ -->
                <h1>Refactor using CSS variables</h1>

                <div class="code-file">
                    <code class="code title">style.css</code>
                    <pre class="code body color-green body--small">
/* Define our variables in the :root pseudo element */
:root {
    --game-size: 640px;
    --cell-size: 32px;
    --color-snake-head: #ffffff;
    --color-snake-body: #cccccc;
    --color-food: #ff0000;
}

body { /* ... */ }

#game {
    position: relative;
    width: var(--game-size);
    height: var(--game-size);
    background-color: #000000;
}

.entity {
    position: absolute;
    width: var(--cell-size);
    height: var(--cell-size);
}

#snake-head {
    background-color: var(--color-snake-head);
}

.snake-body {
    background-color: var(--color-snake-body);
}

#food {
    background-color: var(--color-food);
}</pre
                    >
                </div>
                <!-- }}} -->
            </section>

            <section class="slide">
                <!-- {{{ -->
                <h1>Setup JavaScript and Game Loop</h1>

                <div class="code-file">
                    <code class="code title">index.js</code>
                    <pre class="code body color-blue">
// Used to keep track of current frame number.
let FRAME = 0;

function main() {
    window.requestAnimationFrame(update);
}

function update() {
    // We will put our game logic here...

    // Call update() again once the browser
    // is ready to redraw the page.
    window.requestAnimationFrame(update);

    FRAME++;
}

// Start our game once the page has loaded.
window.onload = main;</pre
                    >
                </div>
                <!-- }}} -->
            </section>

            <section class="slide">
                <!-- {{{ -->
                <h1>Move Snake Head</h1>

                <div class="code-file">
                    <code class="code title">index.js</code>
                    <pre class="code body color-blue">
function update() {
    // MOVE SNAKE HEAD
    // Only move every 30 frames.
    if (FRAME % 30 === 0) {
        const headEl = document.getElementById("snake-head");

        let x = parseInt(headEl.style.left) || 0;
        let y = parseInt(headEl.style.top) || 0;

        // Only move right for now...
        x += 32;

        headEl.style.left = `${x}px`;
        headEl.style.top = `${y}px`;
    }

    /* ... */
}</pre
                    >
                </div>
                <!-- }}} -->
            </section>

            <section class="slide">
                <!-- {{{ -->
                <h1>Move Snake Bodies</h1>

                <div class="code-file">
                    <code class="code title">index.js</code>
                    <pre class="code body color-blue body--small">
function update() {
    if (FRAME % 30 === 0) {
        // MOVE SNAKE BODIES
        const headEl = document.getElementById("snake-head");
        const bodyEls = document.getElementsByClassName("snake-body");

        // Loop through body elements BACKWARDS.
        for (let i = bodyEls.length - 1; i >= 0; i--) {
            const bodyEl = bodyEls[i];
            const prevBodyEl = bodyEls[i - 1] || headEl;

            // Set position of previous body element, or of head element.
            bodyEl.style.left = prevBodyEl.style.left;
            bodyEl.style.top = prevBodyEl.style.top;
        }

        /* ... (move snake head) ... */
        // Note, that we move the BODIES first and the HEAD afterwards.
        // This allows for the first body to copy the OLD position of the head,
        // then when the head updates it moves to its NEW position.
        // This way, the body elements will "lag behind" by one position.
    }

    /* ... */
}</pre
                    >
                </div>
                <!-- }}} -->
            </section>

            <section class="slide">
                <!-- {{{ -->
                <h1>Refactor Snake Movement Code</h1>

                <div class="code-file">
                    <code class="code title">index.js</code>
                    <pre class="code body color-blue body--small">
function update() {
    if (FRAME % 30 === 0) {
        moveSnakeBodies();
        moveSnakeHead();
    }

    /* ... */
}

// Let's move our movement code into two separate functions;
// one for moving the head moveSnakeHead(), and one for
// the bodies moveSnakeBodies().
// This allows our update() function to stay nice and clean.

function moveSnakeHead() {
    const headEl = document.getElementById("snake-head");

    /* ... */
}

function moveSnakeBodies() {
    /* ... */
}
</pre
                    >
                </div>
                <!-- }}} -->
            </section>

            <section class="slide">
                <!-- {{{ -->
                <h1>Move Snake in different directions</h1>

                <div class="code-file">
                    <code class="code title">index.js</code>
                    <pre class="code body color-blue body--small">
// Keep track of the direction our snake is moving into.
// One of "up", "down", "left", or "right".
let SNAKE_DIRECTION = "right";
// Our step size for moving our snake.
const STEP = 32;

function moveSnakeHead() {
    /* ... */

    switch (SNAKE_DIRECTION) {
        case "up": {
            y -= STEP;
            break;
        }
        case "down": {
            y += STEP;
            break;
        }
        case "left": {
            x -= STEP;
            break;
        }
        case "right": {
            x += STEP;
            break;
        }
    }

    snakeEl.style.left = `${x}px`;
    snakeEl.style.top = `${y}px`;
}</pre
                    >
                </div>
                <!-- }}} -->
            </section>

            <section class="slide">
                <!-- {{{ -->
                <h1>User Input</h1>

                <div class="code-file">
                    <code class="code title">index.js</code>
                    <pre class="code body color-blue body--small">
function main() {
    // Call the onKeyDown() function when the user presses a key.
    document.addEventListener("keydown", onKeyDown);

    /* ... */
}

function onKeyDown(event) {
    const key = event.key.toLowerCase();
    switch (key) {
        case "w":
            // We aren't allowed to move in the opposite direction.
            if (SNAKE_DIRECTION !== "down") {
                SNAKE_DIRECTION = "up";
            }
            break;
        case "s":
            if (SNAKE_DIRECTION !== "up") {
                SNAKE_DIRECTION = "down";
            }
            break;
        case "a":
            if (SNAKE_DIRECTION !== "right") {
                SNAKE_DIRECTION = "left";
            }
            break;
        case "d":
            if (SNAKE_DIRECTION !== "left") {
                SNAKE_DIRECTION = "right";
            }
            break;
    }
}</pre
                    >
                </div>
                <!-- }}} -->
            </section>
        </main>

        <script type="text/javascript" src="./index.js"></script>
    </body>
</html>
